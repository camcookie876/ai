<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Camcookie AI</title>
  </head>
  <body>
    <h1>Camcookie AI</h1>

    <textarea id="input" rows="4" cols="50" placeholder="Ask me anything..."></textarea>
    <br />
    <button id="run">Ask AI</button>

    <h3>Output:</h3>
    <pre id="output"></pre>

    <script>
      const FUNCTION_URL = "https://mzzpwrtcusgbtwtnjfhv.supabase.co/functions/v1/Camcookie-AI";
      const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16enB3cnRjdXNnYnR3dG5qZmh2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5MTA1NjUsImV4cCI6MjA4NjQ4NjU2NX0.ejIxfKu_l2idfdkC6_cNzWpJ5jpEo3n5YkFo8iZhPcs"; // your anon key

      async function runAI() {
        const message = document.getElementById("input").value;
        const output = document.getElementById("output");

        output.textContent = "Thinkingâ€¦";

        try {
          const response = await fetch(FUNCTION_URL, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Authorization": `Bearer ${SUPABASE_ANON_KEY}`,
              "apikey": SUPABASE_ANON_KEY
            },
            body: JSON.stringify({ message })
          });

          const data = await response.json();
          output.textContent = data.choices?.[0]?.message?.content || JSON.stringify(data);
        } catch (err) {
          output.textContent = "Error: " + err;
        }
      }

      document.getElementById("run").onclick = runAI;
    </script>
  </body>
</html>