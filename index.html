<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Camcookie AI (Hugging Face)</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #0d0d0d;
        color: white;
        padding: 20px;
      }
      textarea {
        width: 100%;
        max-width: 600px;
        height: 120px;
        padding: 10px;
        border-radius: 8px;
        border: none;
        background: #1a1a1a;
        color: white;
      }
      button {
        margin-top: 10px;
        padding: 10px 20px;
        border-radius: 8px;
        border: none;
        background: #4ade80;
        color: black;
        font-weight: bold;
        cursor: pointer;
      }
      pre {
        margin-top: 20px;
        padding: 10px;
        background: #1a1a1a;
        border-radius: 8px;
        max-width: 600px;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <h1>Camcookie AI (Hugging Face)</h1>

    <textarea id="input" placeholder="Ask Camcookie AI anything..."></textarea>
    <br />
    <button onclick="runAI()">Ask</button>

    <pre id="output"></pre>

    <script>
      const FUNCTION_URL = "https://mzzpwrtcusgbtwtnjfhv.supabase.co/functions/v1/Camcookie-AI";

      // Fill these in privately
      const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16enB3cnRjdXNnYnR3dG5qZmh2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5MTA1NjUsImV4cCI6MjA4NjQ4NjU2NX0.ejIxfKu_l2idfdkC6_cNzWpJ5jpEo3n5YkFo8iZhPcs";
      const HF_KEY = "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";

      async function runAI() {
        const message = document.getElementById("input").value;
        const output = document.getElementById("output");

        output.textContent = "Thinkingâ€¦";

        try {
          const response = await fetch(FUNCTION_URL, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Authorization": `Bearer ${SUPABASE_ANON_KEY}`,
              "apikey": SUPABASE_ANON_KEY,
              "x-hf-key": HF_KEY
            },
            body: JSON.stringify({ message })
          });

          const data = await response.json();

          // Hugging Face returns an array with generated_text
          const reply = data[0]?.generated_text || JSON.stringify(data, null, 2);

          output.textContent = reply;
        } catch (err) {
          output.textContent = "Error: " + err;
        }
      }
    </script>
  </body>
</html>